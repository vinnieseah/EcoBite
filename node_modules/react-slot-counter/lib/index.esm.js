'use client';
import n,{memo as e,useState as t,useRef as r,useEffect as i,useMemo as u,useCallback as o,forwardRef as a,useImperativeHandle as l}from"react";var c=function(){return c=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},c.apply(this,arguments)};var s=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.filter(Boolean).join(" ")},d=function(n,e){for(var t=[],r=n;r<e;r+=1)t.push(r);return t},f=function(n,e){for(var t=[],r=n;r!==e;)t.push(r),10===(r+=1)&&(r=0);return t},m=function(n,e){var t=Math.random()*(e-n);return Math.floor(t+n)},v=function(n){for(var e,t=function(n,e,t){if(t||2===arguments.length)for(var r,i=0,u=e.length;i<u;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}([],n,!0),r=t.length-1;r>0;r-=1){var i=Math.floor(Math.random()*(r+1));e=[t[i],t[r]],t[r]=e[0],t[i]=e[1]}return t},h=function(n){return"number"==typeof n?n:(Array.isArray(n)?n.join(""):n).replace(/[,.]/g,"")},p=function(n){return"object"!=typeof n&&!Number.isNaN(h(n))},g=function(n){return"object"==typeof n};var y="index-module_slot_wrap__ZT-DX",b="index-module_slot__DpPgW",N="index-module_separator__7GhtE",C="index-module_numbers__sqlqm",_="index-module_num__j6XH3";!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}(".index-module_slot_wrap__ZT-DX {\n  display: inline-block;\n  white-space: nowrap;\n}\n\n.index-module_slot__DpPgW {\n  display: inline-block;\n  overflow: hidden;\n  text-align: center;\n  vertical-align: middle;\n  will-change: transform;\n}\n\n.index-module_separator__7GhtE {\n  display: inline-block;\n  vertical-align: middle;\n  text-align: center;\n}\n\n.index-module_numbers__sqlqm {\n  display: block;\n}\n\n.index-module_num__j6XH3 {\n  display: block;\n}");var x="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;var S=e((function(e){var o,a,l=e.isNew,d=e.charClassName,f=e.numbersRef,m=e.active,h=e.isChanged,p=e.effectiveDuration,g=e.delay,y=e.value,N=e.startValue,S=e.disableStartValue,A=e.dummyList,w=e.hasSequentialDummyList,E=e.hasInfiniteList,M=e.valueClassName,j=e.numberSlotClassName,T=e.numberClassName,D=e.reverse,O=e.sequentialAnimationMode,q=e.useMonospaceWidth,k=e.maxNumberWidth,L=e.onFontHeightChange,I=t(!1),P=I[0],R=I[1],V=t(y),W=V[0],B=V[1],F=r(),H=r(y),X=r(null),Y=t(0),z=Y[0],G=Y[1],Z=t(w?A:v(A)),J=Z[0],U=Z[1],K=t(!1),Q=K[0],$=K[1],nn=z*(A.length+1);x((function(){$(!0)}),[]),x((function(){var n,e;G(null!==(e=null===(n=X.current)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==e?e:0)}),[Q]),i((function(){m?requestAnimationFrame((function(){R(m)})):R(m)}),[m]),i((function(){var n=X.current;if(z&&n&&"undefined"!=typeof ResizeObserver){var e=new ResizeObserver((function(n){var e=n[0].contentRect.height;z!=e&&(null==L||L(e))}));return e.observe(n),function(){e.disconnect()}}}),[z,L]),u((function(){S&&(F.current=H.current)}),[S]),i((function(){P&&(F.current=H.current,H.current=y,setTimeout((function(){return B(y)}),O?0:1e3*p*1.3/A.length+1e3*g))}),[P,y,p,g,A.length,O]),i((function(){U(w?A:v(A))}),[y,A,w]);var en=function(){return J.map((function(e,t){return n.createElement("span",{key:t,className:s(_,T),"aria-hidden":"true"},e)}))},tn=D?W:null!=N?N:W;O&&(tn=D?W:null!==(o=null!=N?N:F.current)&&void 0!==o?o:W,O&&l&&!D&&(tn=""));var rn=D&&null!=N?N:W;return O&&(rn=D&&null!==(a=null!=N?N:F.current)&&void 0!==a?a:W),n.createElement("span",{className:s(b,d),style:{display:"inline-block",width:Q&&q?k:void 0,height:Q?z:void 0}},n.createElement("span",{ref:f,className:s(C,j),style:c({transition:"none",transform:D?"translateY(-".concat(nn,"px)"):"translateY(0px)"},P&&h&&{transform:D?"translateY(0px)":"translateY(-".concat(nn,"px)"),transition:"transform ".concat(p,"s ").concat(g,"s ease-in-out")})},Q?n.createElement(n.Fragment,null,n.createElement("span",{className:s(_,T),"aria-hidden":"true",style:{height:z}},tn),en(),n.createElement("span",{className:s(_,T,M),ref:X},rn),E?en():null):n.createElement("span",{className:s(_,T),"aria-hidden":"true"},null!=N?N:W)))}));var A=[",","."," "];var w=e(a((function(e,a){var c,v,b,C,_,w,E,M,j,T,D=e.value,O=e.startValue,q=e.startValueOnce,k=void 0!==q&&q,L=e.duration,I=void 0===L?.7:L,P=e.dummyCharacters,R=e.dummyCharacterCount,V=void 0===R?6:R,W=e.autoAnimationStart,B=void 0===W||W,F=e.containerClassName,H=e.charClassName,X=e.separatorClassName,Y=e.valueClassName,z=e.numberSlotClassName,G=e.numberClassName,Z=e.animateUnchanged,J=void 0!==Z&&Z,U=e.hasInfiniteList,K=void 0!==U&&U,Q=e.sequentialAnimationMode,$=void 0!==Q&&Q,nn=e.useMonospaceWidth,en=void 0!==nn&&nn,tn=e.direction,rn=e.debounceDelay,un=e.animateOnVisible,on=function(n,e){var r=t(n),u=r[0],o=r[1];return i((function(){if(0===e)return o(n);var t=setTimeout((function(){o(n)}),e);return function(){clearTimeout(t)}}),[n,e]),u}(D,null!=rn?rn:0),an=u((function(){return function(n){return Array.isArray(n)&&g(n[0])}(on)?"":"object"==typeof on?JSON.stringify(on):on.toString()}),[on]),ln=t(!1),cn=ln[0],sn=ln[1],dn=r(),fn=r(null),mn=r(null),vn=r(O),hn=u((function(){return"boolean"==typeof un?un:"object"==typeof un||void 0}),[un]),pn=u((function(){return"object"==typeof un?un.rootMargin:void 0}),[un]),gn=u((function(){return"object"==typeof un?un.triggerOnce:void 0}),[un]),yn=r(!0),bn=!hn&&B,Nn=r(null==O||bn?on:O),Cn=r(O),_n=r(0),xn=r(0),Sn=t([]),An=Sn[0],wn=Sn[1],En=r(),Mn=t(0),jn=Mn[0],Tn=Mn[1],Dn=t(),On=Dn[0],qn=Dn[1],kn=r(!1),Ln=null!=O&&(!k||_n.current<1),In=null!==(v=null===(c=dn.current)||void 0===c?void 0:c.dummyCharacterCount)&&void 0!==v?v:V,Pn=null!==(C=null===(b=dn.current)||void 0===b?void 0:b.duration)&&void 0!==C?C:I,Rn=o((function(){var n=mn.current;if(n){var e=d(0,10).map((function(e){var t=document.createElement("span");t.className=null!=Y?Y:"",t.style.position="absolute",t.style.top="0",t.style.left="-9999px",t.style.visibility="hidden",t.textContent=e.toString(),n.appendChild(t);var r=t.getBoundingClientRect().width;return n.removeChild(t),r})),t=Math.max.apply(Math,e);qn(t)}}),[Y]);x((function(){var n;Rn(),null===(n=document.fonts)||void 0===n||n.ready.then((function(){Rn()}))}),[]),i((function(){wn(d(0,In-1).map((function(n){if(!P)return m(0,10);var e=n>=P.length?m(0,P.length):n;return P[e]})))}),[P,In]),Nn.current!==on&&kn.current&&xn.current>0&&(Cn.current=Nn.current,Nn.current=on);var Vn=Array.isArray(Cn.current)?Cn.current:null!==(w=null===(_=Cn.current)||void 0===_?void 0:_.toString().split(""))&&void 0!==w?w:[],Wn=Array.isArray(Nn.current)?Nn.current:null!==(M=null===(E=Nn.current)||void 0===E?void 0:E.toString().split(""))&&void 0!==M?M:[],Bn=Array.isArray(vn.current)?vn.current:null!==(T=null===(j=vn.current)||void 0===j?void 0:j.toString().split(""))&&void 0!==T?T:[],Fn=u((function(){return Array.isArray(on)?on:null==on?void 0:on.toString().split("")}),[on]),Hn=u((function(){return Array.isArray(O)?O:null==O?void 0:O.toString().split("")}),[O]),Xn=Vn.length!==Wn.length,Yn=[];Wn.forEach((function(n,e){var t=Wn.length-e-1,r=Ln?Bn:Vn;(Wn[t]!==r[t]||Xn||J)&&Yn.push(t)})),Yn.reverse();var zn=u((function(){return Math.min(.1,Pn/Fn.length)}),[Pn,Fn.length]),Gn=o((function(){En.current&&clearTimeout(En.current),sn(!1),_n.current=xn.current,_n.current+=1,En.current=setTimeout((function(){xn.current+=1,sn(!0)}),20)}),[]),Zn=o((function(n){var e=Ln?O:Cn.current;if(null==e||!p(e)||!p(on))return[];var t=e.toString().length,r=on.toString().length,i=t<r,u=Math.abs(t-r),o=Number(h(e.toString())),a=Number(h(on.toString())),l=Number(o.toString()[i?-u+n:u+n]||0),c=Number(a.toString()[n]||0);return c===l?[]:o<a?f((l+1)%10,c):f((c+1)%10,l)}),[Ln,on,O]),Jn=o((function(){Tn((function(n){return n+1})),Rn()}),[Rn]);i((function(){(kn.current||null!=Cn.current)&&(kn.current||null==vn.current)&&(kn.current||bn)&&Gn()}),[an,Gn,bn]),i((function(){bn&&Gn()}),[bn,Gn]),i((function(){requestAnimationFrame((function(){kn.current=!0}))}),[]),l(a,(function(){return{startAnimation:te,refreshStyles:Jn}}));var Un=null==O||bn||0!==_n.current?Fn:Hn||[],Kn=((null==Hn?void 0:Hn.length)||0)-Un.length,Qn=function(n){var e,t=r(n),u=r(t.current),a=n.join(","),l=null===(e=t.current)||void 0===e?void 0:e.join(",");return i((function(){l!==a&&(u.current=(null==l?void 0:l.split(","))||[],t.current=a.split(","))}),[a,l]),{getPrevDependencies:o((function(){return u.current}),[]),setPrevDependenciesToSameAsCurrent:o((function(){u.current=t.current}),[])}}(Un),$n=Qn.getPrevDependencies,ne=Qn.setPrevDependenciesToSameAsCurrent,ee=Un.length-$n().length,te=o((function(n){null==O||k||(Cn.current=void 0),dn.current=n,Gn(),ne()}),[O,k,Gn,ne]),re=u((function(){return n=function(){Jn()},e=0,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){n.apply(void 0,r)}),e)};var n,e,t}),[Jn]);i((function(){if(hn&&fn.current){var n=new IntersectionObserver((function(t){t[0].isIntersecting&&yn.current&&(te(),yn.current=!1,gn&&(n.disconnect(),e.disconnect()))}),{rootMargin:pn,threshold:1}),e=new IntersectionObserver((function(n){n[0].isIntersecting||(yn.current=!0)}),{threshold:0});return n.observe(fn.current),e.observe(fn.current),function(){n.disconnect(),e.disconnect()}}}),[hn,pn,gn,te]);var ie=-1;return n.createElement("span",{key:jn,ref:fn,className:s(F,y)},Un.map((function(e,t){var r,i,u=Yn.includes(t),o=(u?Yn.indexOf(t):0)*zn,a=Cn.current,l=null!=O&&!!k&&_n.current>1,c=null!=on&&null!=a&&p(on)&&p(a)&&h(on)<h(a);if((null===(r=dn.current)||void 0===r?void 0:r.direction)&&(c="top-down"===(null===(i=dn.current)||void 0===i?void 0:i.direction)),tn&&(c="top-down"===tn),!g(e)&&A.includes(e))return n.createElement("span",{key:Wn.length-t-1,className:s(N,X)},e);var d=$&&(!bn||xn.current>1);return ie+=1,n.createElement(S,{key:Un.length-t-1,index:t,isNew:ee>0&&t<ee,maxNumberWidth:On,numbersRef:mn,active:cn,isChanged:u,charClassName:H,effectiveDuration:Pn,delay:o,value:e,startValue:l||null==Hn?void 0:Hn[t+Kn],disableStartValue:l,dummyList:d?Zn(ie):An,hasSequentialDummyList:d,hasInfiniteList:K,valueClassName:Y,numberSlotClassName:z,numberClassName:G,reverse:c,sequentialAnimationMode:$,useMonospaceWidth:en,onFontHeightChange:re})})))})));export{w as default};
//# sourceMappingURL=index.esm.js.map
